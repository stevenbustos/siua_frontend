{"remainingRequest":"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/babel-loader/lib/index.js!/home/stevenbustos/Downloads/SIUA/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/stevenbustos/Downloads/SIUA/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/stevenbustos/Downloads/SIUA/frontend/src/components/requests/create/CreateRequestA.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/stevenbustos/Downloads/SIUA/frontend/src/components/requests/create/CreateRequestA.vue","mtime":1548795586000},{"path":"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nimport Multiselect from 'vue-multiselect';\nimport Vuex from 'vuex';\nimport { axios, verifyPermits, requestModulePermit, postModulePermit } from '../../../helpers/axios';\nimport { required } from 'vuelidate/lib/validators';\nimport CreatePerson from '../../persons/CreatePersonModal.vue';\nimport CreateClause from '../../clauses/CreateClauseModal.vue';\nvar API_IP = process.env.VUE_APP_API_IP;\nvar mapActions = Vuex.mapActions,\n    mapState = Vuex.mapState;\nexport default {\n  props: ['stp'],\n  components: {\n    Multiselect: Multiselect,\n    'create-person': CreatePerson,\n    'create-clause': CreateClause\n  },\n  data: function data() {\n    return {\n      types_request: [],\n      permitODS: [],\n      permitODC: [],\n      permitATI: [],\n      permitAll: [0, 1, 2, 3, 4],\n      personasInterventor: [],\n      personasContratista: [],\n      personasResponsable: [],\n      interventoresSelect: [],\n      contratistasSelect: [],\n      responsablesSelect: [],\n      interventor: \"\",\n      contratista: \"\",\n      responsable: \"\",\n      start_request_date: \"\",\n      end_request_date: \"\",\n      total_days: \"\",\n      causals: [],\n      clauses: [],\n      causal: \"\",\n      clausulas: \"\",\n      clausulas_request: [],\n      person_charge: \"\",\n      message: \"\",\n      tipo_solicitud: \"\",\n      trabajadores: [],\n      step: this.stp,\n      correct_date: false,\n      modal_show: false,\n      submitting: false\n    };\n  },\n  validations: {\n    tipo_solicitud: {\n      required: required\n    },\n    interventor: {\n      required: required\n    },\n    contratista: {\n      required: required\n    },\n    start_request_date: {\n      required: required\n    },\n    end_request_date: {\n      required: required\n    },\n    total_days: {\n      required: required\n    },\n    causal: {\n      required: required\n    },\n    responsable: {\n      required: required\n    }\n  },\n  watch: {\n    interventor: function interventor(val) {\n      var _this = this;\n\n      this.personasInterventor = this.interventoresSelect.filter(function (p) {\n        return p != _this.contratista && p != _this.responsable;\n      });\n      this.personasContratista = this.contratistasSelect.filter(function (p) {\n        return p != _this.interventor && p != _this.responsable;\n      });\n      this.personasResponsable = this.responsablesSelect.filter(function (p) {\n        return p != _this.interventor && p != _this.contratista;\n      });\n    },\n    contratista: function contratista(val) {\n      var _this2 = this;\n\n      this.personasInterventor = this.interventoresSelect.filter(function (p) {\n        return p != _this2.contratista && p != _this2.responsable;\n      });\n      this.personasContratista = this.contratistasSelect.filter(function (p) {\n        return p != _this2.interventor && p != _this2.responsable;\n      });\n      this.personasResponsable = this.responsablesSelect.filter(function (p) {\n        return p != _this2.interventor && p != _this2.contratista;\n      });\n    },\n    responsable: function responsable(val) {\n      var _this3 = this;\n\n      this.personasInterventor = this.interventoresSelect.filter(function (p) {\n        return p != _this3.contratista && p != _this3.responsable;\n      });\n      this.personasContratista = this.contratistasSelect.filter(function (p) {\n        return p != _this3.interventor && p != _this3.responsable;\n      });\n      this.personasResponsable = this.responsablesSelect.filter(function (p) {\n        return p != _this3.interventor && p != _this3.contratista;\n      });\n    }\n  },\n  methods: {\n    loadDataMultiselects: function () {\n      var _loadDataMultiselects = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var causalsData, clausesData, types_tmp, k, allProfesores, allContratistas, allPlanta, person;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return verifyPermits(9, this.permitAll);\n\n              case 2:\n                this.permitODS = _context.sent;\n                _context.next = 5;\n                return verifyPermits(10, this.permitAll);\n\n              case 5:\n                this.permitODC = _context.sent;\n                _context.next = 8;\n                return verifyPermits(11, this.permitAll);\n\n              case 8:\n                this.permitATI = _context.sent;\n                _context.next = 11;\n                return requestModulePermit(200, 0);\n\n              case 11:\n                causalsData = _context.sent;\n                _context.next = 14;\n                return requestModulePermit(6, 0);\n\n              case 14:\n                clausesData = _context.sent;\n                console.log(\"asdadsad\");\n                console.log(this.permitODS[2]);\n                console.log(this.permitODC[2]);\n                console.log(this.permitATI[2]);\n\n                if (!(!this.permitODS[2] && !this.permitODC[2] && !this.permitATI[2])) {\n                  _context.next = 23;\n                  break;\n                }\n\n                alert(\"no tiene permiso\");\n                _context.next = 44;\n                break;\n\n              case 23:\n                if (causalsData !== -1 && causalsData !== 0) {\n                  this.causals = causalsData;\n                }\n\n                if (clausesData !== -1 && clausesData !== 0) {\n                  this.clauses = clausesData;\n                }\n\n                _context.next = 27;\n                return requestModulePermit(205, 0);\n\n              case 27:\n                types_tmp = _context.sent;\n\n                for (k in types_tmp) {\n                  if (types_tmp[k].nombre == \"ODS\" && this.permitODS[2]) {\n                    this.types_request.push(types_tmp[k]);\n                  } else if (types_tmp[k].nombre == \"ODC\" && this.permitODC[2]) {\n                    this.types_request.push(types_tmp[k]);\n                  } else if (types_tmp[k].nombre == \"ATI\" && this.permitATI[2]) {\n                    this.types_request.push(types_tmp[k]);\n                  }\n                }\n\n                _context.next = 31;\n                return requestModulePermit(206, 0, \"profesor\");\n\n              case 31:\n                allProfesores = _context.sent;\n                _context.next = 34;\n                return requestModulePermit(206, 0, \"contratista\");\n\n              case 34:\n                allContratistas = _context.sent;\n                _context.next = 37;\n                return requestModulePermit(206, 0, \"planta\");\n\n              case 37:\n                allPlanta = _context.sent;\n\n                for (k in allProfesores) {\n                  person = {};\n                  person[\"_id\"] = allProfesores[k]._id;\n                  person[\"name\"] = allProfesores[k].primer_nombre + \" \" + allProfesores[k].segundo_nombre + \" \" + allProfesores[k].primer_apellido + \" \" + allProfesores[k].segundo_apellido;\n                  this.interventoresSelect.push(person);\n                  this.responsablesSelect.push(person);\n                }\n\n                for (k in allContratistas) {\n                  person = {};\n                  person[\"_id\"] = allContratistas[k]._id;\n                  person[\"name\"] = allContratistas[k].primer_nombre + \" \" + allContratistas[k].segundo_nombre + \" \" + allContratistas[k].primer_apellido + \" \" + allContratistas[k].segundo_apellido;\n                  this.interventoresSelect.push(person);\n                  this.responsablesSelect.push(person);\n                  this.contratistasSelect.push(person);\n                }\n\n                for (k in allPlanta) {\n                  person = {};\n                  person[\"_id\"] = allPlanta[k]._id;\n                  person[\"name\"] = allPlanta[k].primer_nombre + \" \" + allPlanta[k].segundo_nombre + \" \" + allPlanta[k].primer_apellido + \" \" + allPlanta[k].segundo_apellido;\n                  this.interventoresSelect.push(person);\n                  this.responsablesSelect.push(person);\n                }\n\n                this.personasInterventor = this.interventoresSelect;\n                this.personasContratista = this.contratistasSelect;\n                this.personasResponsable = this.responsablesSelect;\n\n              case 44:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadDataMultiselects() {\n        return _loadDataMultiselects.apply(this, arguments);\n      }\n\n      return loadDataMultiselects;\n    }(),\n    changeEndRequestDate: function changeEndRequestDate() {\n      var sd = new Date(this.start_request_date);\n      var ed = new Date(this.end_request_date);\n\n      if (sd > ed) {\n        this.correct_date = true;\n        this.total_days = 0;\n      } else {\n        this.correct_date = false;\n        sd.setDate(sd.getDate() + 1);\n        ed.setDate(ed.getDate() + 1);\n        var differentDays = Math.ceil(Math.abs(ed.getTime() - sd.getTime()) / (1000 * 3600 * 24));\n        this.total_days = differentDays + 1;\n      }\n    },\n    cancel: function cancel() {\n      var _this4 = this;\n\n      this.$v.$reset();\n      this.$swal({\n        title: 'Espere',\n        text: '¿Esta seguro que quiere cancelar la operación?',\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Si',\n        cancelButtonText: 'No'\n      }).then(function (result) {\n        if (result.value) {\n          _this4.$swal({\n            title: 'Cancelado',\n            type: 'success'\n          }).then(function (result) {\n            if (result.value) {\n              _this4.$router.push({\n                name: 'requests'\n              });\n            }\n          });\n        }\n      });\n    },\n    saveContinue: function () {\n      var _saveContinue = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _this5 = this;\n\n        var k, data, res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.$v.$touch();\n\n                if (!this.$v.$invalid) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                this.$swal({\n                  title: 'Error!',\n                  text: 'Debe llenar campos necesarios en el formulario',\n                  type: 'error',\n                  confirmButtonText: 'Cerrar'\n                });\n                _context2.next = 25;\n                break;\n\n              case 5:\n                this.submitting = true;\n\n                for (k in this.clausulas) {\n                  this.clausulas_request.push(this.clausulas[k]._id);\n                }\n\n                data = {\n                  numero_solicitud: \"\",\n                  tipo_solicitud: this.tipo_solicitud._id,\n                  fecha_inicio: this.start_request_date,\n                  fecha_final: this.end_request_date,\n                  valor_solicitud: 0,\n                  justificacion: \"\",\n                  justificacion_adicional: \"\",\n                  causal_seleccion: this.causal._id,\n                  objetivo_general: \"\",\n                  clausulas: this.clausulas_request,\n                  especificaciones_tecnicas: [],\n                  obligaciones_especificas: [],\n                  rubros: [],\n                  trabajadores: [{\n                    persona: this.contratista._id,\n                    tipo: \"Contratista\"\n                  }, {\n                    persona: this.interventor._id,\n                    tipo: \"Interventor\"\n                  }, {\n                    persona: this.responsable._id,\n                    tipo: \"Responsable\"\n                  }]\n                };\n\n                if (!(this.tipo_solicitud.nombre == \"ODS\" && this.permitODS[2])) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                _context2.next = 11;\n                return postModulePermit(9, 2, data);\n\n              case 11:\n                res = _context2.sent;\n                _context2.next = 24;\n                break;\n\n              case 14:\n                if (!(this.tipo_solicitud.nombre == \"ODC\" && this.permitODC[2])) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                _context2.next = 17;\n                return postModulePermit(10, 2, data);\n\n              case 17:\n                res = _context2.sent;\n                _context2.next = 24;\n                break;\n\n              case 20:\n                if (!(this.tipo_solicitud.nombre == \"ATI\" && this.permitATI[2])) {\n                  _context2.next = 24;\n                  break;\n                }\n\n                _context2.next = 23;\n                return postModulePermit(11, 2, data);\n\n              case 23:\n                res = _context2.sent;\n\n              case 24:\n                if (res != undefined && res != null) {\n                  if (res.res) {\n                    console.log(res.res.obj.data);\n                    this.$swal({\n                      title: 'Exito!',\n                      text: 'Se creo la solicitud con exito.',\n                      type: 'success',\n                      confirmButtonText: 'Aceptar'\n                    }).then(function (result) {\n                      if (result.value) {\n                        _this5.$emit('saveObject', res);\n\n                        _this5.submitting = false;\n                        _this5.step++;\n\n                        _this5.$emit('nextStep', _this5.step);\n                      }\n                    });\n                  } else if (res.error) {\n                    this.$swal({\n                      title: 'Error!',\n                      text: res.error.error.msg,\n                      type: 'error',\n                      confirmButtonText: 'Cerrar'\n                    });\n                    this.submitting = false;\n                  }\n                }\n\n              case 25:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function saveContinue() {\n        return _saveContinue.apply(this, arguments);\n      }\n\n      return saveContinue;\n    }(),\n    // saveContinue(){\n    //   this.$v.$touch()\n    //   if (this.$v.$invalid) {\n    //     this.$swal({\n    //       title: 'Error!',\n    //       text: 'Debe llenar campos necesarios en el formulario',\n    //       type: 'error',\n    //       confirmButtonText: 'Cerrar'\n    //     });\n    //   } else {\n    //     this.submitting = true\n    //     for(var k in this.clausulas){\n    //       this.clausulas_request.push(this.clausulas[k]._id)\n    //     }\n    //     axios\n    //     .post(API_IP+\"/request\", {\n    //       numero_solicitud: \"\",\n    //       tipo_solicitud:this.tipo_solicitud._id,\n    //       fecha_inicio:this.start_request_date,\n    //       fecha_final: this.end_request_date,\n    //       valor_solicitud:0,\n    //       justificacion:\"\",\n    //       justificacion_adicional:\"\",\n    //       causal_seleccion:this.causal._id,\n    //       objetivo_general:\"\",\n    //       clausulas:this.clausulas_request,\n    //       especificaciones_tecnicas:[],\n    //       obligaciones_especificas:[],\n    //       rubros:[],\n    //       trabajadores:[{persona:this.contratista._id,tipo:\"Contratista\"},{persona:this.interventor._id,tipo:\"Interventor\"},{persona:this.person_charge._id,tipo:\"Responsable\"}]\n    //     })\n    //     .then(response => {\n    //       console.log(response);\n    //       this.$swal({\n    //         title: 'Exito!',\n    //         text: 'Se creo la solicitud con exito.',\n    //         type: 'success',\n    //         confirmButtonText: 'Aceptar'\n    //       }).then((result) => {\n    //         if (result.value) {\n    //           this.$emit('saveObject',response.data);\n    //           this.submitting = false;\n    //           this.step++\n    //           this.$emit('nextStep', this.step)\n    //         }\n    //       });\n    //     })\n    //     .catch(error => {\n    //       console.log(error);\n    //       this.$swal({\n    //         title: 'Error!',\n    //         text: error.response.data.error.msg,\n    //         type: 'error',\n    //         confirmButtonText: 'Cerrar'\n    //       });\n    //       this.submitting = false;\n    //     });\n    //   }\n    // },\n    // // Modal para la creación de personas\n    showModalCreatePerson: function showModalCreatePerson() {\n      this.modal_show = false;\n      this.$modal.show('create-person');\n    },\n    closeModalCreatePerson: function closeModalCreatePerson(value) {\n      this.modal_show = value;\n\n      if (this.modal_show === true) {\n        this.$modal.hide('create-person');\n        location.reload();\n      }\n    },\n    showModalCreateClause: function showModalCreateClause() {\n      this.modal_show = false;\n      this.$modal.show('create-clause');\n    },\n    closeModalCreateClause: function closeModalCreateClause(value) {\n      this.modal_show = value;\n\n      if (this.modal_show === true) {\n        this.$modal.hide('create-clause');\n        location.reload();\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.loadDataMultiselects();\n  }\n};",{"version":3,"sources":["CreateRequestA.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col-md-8 offset-md-2\" style=\"margin-bottom:50px;\">\n        <div class=\"row\">\n          <div class=\"col\">\n            <button class=\"btn btn-primary\" type=\"button\" @click=\"cancel()\" style=\"background:#003e1e;border-color:#003e1e;\">\n              <font-awesome-icon icon=\"arrow-left\" size=\"lg\"></font-awesome-icon>\n            </button>\n          </div>\n        </div>\n        <div>&nbsp;</div>\n        <modal name=\"create-person\" :adaptive=\"true\" :scrollable=\"true\" width=\"50%\" height=\"auto\">\n          <create-person\n          :hide_modal=\"modal_show\"\n          @modalShow=\"closeModalCreatePerson\"\n          ></create-person>\n        </modal>\n        <modal name=\"create-clause\" :adaptive=\"true\" :scrollable=\"true\" width=\"50%\" height=\"auto\">\n          <create-clause\n          :hide_modal=\"modal_show\"\n          @modalShow=\"closeModalCreateClause\"\n          ></create-clause>\n        </modal>\n        <div class=\"row justify-content-center\">\n          <div class=\"col-10 align-self-center\">\n            <form v-on:submit.prevent=\"saveContinue\">\n              <div class=\"form-group\" :class=\"{ 'form-group--error': $v.tipo_solicitud.$error }\">\n                <div class=\"row\">\n                  <div class=\"col\">\n                    <label for=\"interventors\">Seleccione tipo de solicitud:</label>\n                  </div>\n                  <div class=\"col-6\">\n                    <multiselect id=\"box1\" v-model.trim=\"$v.tipo_solicitud.$model\" :options=\"types_request\" track-by=\"_id\" label=\"nombre\" :searchable=\"false\" :close-on-select=\"true\" :show-labels=\"true\" placeholder=\"Escoja un tipo de solicitud\">\n                    </multiselect>\n                    <div class=\"alert alert-danger\" role=\"alert\" v-if=\"$v.tipo_solicitud.$dirty && !$v.tipo_solicitud.required\">Es requerido un tipo de solicitud</div>\n\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-group\" :class=\"{ 'form-group--error': $v.interventor.$error }\">\n                <div class=\"row\">\n                  <div class=\"col\">\n                    <label for=\"interventors\">Seleccione interventor:</label>\n                  </div>\n                  <div class=\"col-6\">\n                    <multiselect id=\"box1\" v-model.trim=\"$v.interventor.$model\" :options=\"personasInterventor\" track-by=\"_id\" label=\"name\" :searchable=\"false\" :close-on-select=\"true\" :show-labels=\"true\" placeholder=\"Escoja un interventor\">\n                    </multiselect>\n                    <div class=\"alert alert-danger\" role=\"alert\" v-if=\"$v.interventor.$dirty && !$v.interventor.required\">Es requerido un interventor</div>\n                  </div>\n                  <div class=\"col\">\n                    <button class=\"btn btn-primary\" type=\"button\" @click=\"showModalCreatePerson()\" style=\"background:#003e1e;border-color:#003e1e;\">\n                      <font-awesome-icon icon=\"pencil-alt\" size=\"lg\"></font-awesome-icon>\n                      Crear Nuevo\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-group\" :class=\"{ 'form-group--error': $v.contratista.$error }\">\n                <div class=\"row\">\n                  <div class=\"col\">\n                    <label for=\"contratistas\">Seleccione contratista:</label>\n                  </div>\n                  <div class=\"col-6\">\n                    <multiselect id=\"box2\" v-model.trim=\"$v.contratista.$model\" :options=\"personasContratista\" track-by=\"name\" label=\"name\" :searchable=\"false\" :close-on-select=\"true\" :show-labels=\"true\" placeholder=\"Escoja un contratista\">\n                    </multiselect>\n\n                    <div class=\"alert alert-danger\" role=\"alert\" v-if=\"$v.contratista.$dirty && !$v.contratista.required\">Es requerido un contratista</div>\n                  </div>\n                  <div class=\"col\">\n                    <button class=\"btn btn-primary\" type=\"button\" @click=\"showModalCreatePerson()\" style=\"background:#003e1e;border-color:#003e1e;\">\n                      <font-awesome-icon icon=\"pencil-alt\" size=\"lg\"></font-awesome-icon>\n                      Crear Nuevo\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <h3 style=\"color:#003e1e\"> Plazo </h3>\n              <div>&nbsp;</div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  <label for=\"startDate\">Fecha inicio:</label>\n                </div>\n                <div class=\"col-4\">\n                  <div class=\"form-group\" :class=\"{ 'form-group--error': $v.start_request_date.$error }\">\n                    <input type=\"date\" v-model.trim=\"$v.start_request_date.$model\" class=\"form-control\" id=\"startDate\" aria-describedby=\"startDate\" @input=\"changeEndRequestDate\">\n                    <div class=\"alert alert-danger\" role=\"alert\" v-if=\"$v.start_request_date.$dirty && !$v.start_request_date.required\">Es requerida una fecha de inicio</div>\n                  </div>\n                </div>\n                <div class=\"col\">\n                  <label for=\"endDate\">Fecha final:</label>\n                </div>\n                <div class=\"col-4\">\n                  <div class=\"form-group\" :class=\"{ 'form-group--error': $v.end_request_date.$error }\">\n                    <input type=\"date\" v-model.trim=\"$v.end_request_date.$model\" class=\"form-control\" id=\"endDate\" aria-describedby=\"endDate\" @input=\"changeEndRequestDate\">\n                    <div class=\"alert alert-danger\" role=\"alert\" v-if=\"$v.end_request_date.$dirty && !$v.end_request_date.required\">Es requerida una fecha final</div>\n                    <div class=\"alert alert-danger\" role=\"alert\" v-if=\"correct_date\">La fecha final no puede ser menor a la fecha de inicio</div>\n                  </div>\n                </div>\n              </div>\n              <div>&nbsp;</div>\n              <div class=\"form-group\" :class=\"{ 'form-group--error': $v.total_days.$error }\">\n                <div class=\"row justify-content-center\">\n                  <div class=\"col-auto\">\n                    <label for=\"totalDays\">Total en dias:</label>\n                  </div>\n                  <div class=\"col-5\">\n                    <input type=\"text\" v-model.trim=\"$v.total_days.$model\" class=\"form-control\" id=\"totalDays\" aria-describedby=\"totalDays\" placeholder=\"Total\" disabled>\n                    <div class=\"alert alert-danger\" role=\"alert\" v-if=\"$v.total_days.$dirty && !$v.total_days.required\">Es requerido un total de dias</div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-group\" :class=\"{ 'form-group--error': $v.causal.$error }\">\n                <div class=\"row justify-content-center\">\n                  <div class=\"col-auto\">\n                    <label for=\"selectionCausal\">Causal de selección:</label>\n                  </div>\n                  <div class=\"col-6\">\n                    <multiselect v-model.trim=\"$v.causal.$model\" :options=\"causals\" track-by=\"_id\" label=\"nombre\" :searchable=\"false\" :close-on-select=\"true\" :show-labels=\"true\" placeholder=\"Causal\">\n                    </multiselect>\n                    <div class=\"alert alert-danger\" role=\"alert\" v-if=\"$v.causal.$dirty && !$v.causal.required\">Es requerido un causal de selección</div>\n                  </div>\n                </div>\n              </div>\n\n              <h3 style=\"color:#003e1e\"> Clausulas adicionales (marcar) </h3>\n              <div>&nbsp;</div>\n              <div class=\"row justify-content-center\">\n                <div class=\"col-6\">\n                  <div class=\"form-group\">\n                    <multiselect v-model=\"clausulas\" :options=\"clauses\" :multiple=\"true\" :close-on-select=\"true\" :clear-on-select=\"false\" :hide-selected=\"true\" :preserve-search=\"true\" placeholder=\"Escoja las clausulas\" label=\"nombre\" track-by=\"_id\" :preselect-first=\"false\">\n                    </multiselect>\n                  </div>\n                </div>\n                <div class=\"col-auto\">\n                  <button class=\"btn btn-primary\" type=\"button\" @click=\"showModalCreateClause()\" style=\"background:#003e1e;border-color:#003e1e;\">\n                    <font-awesome-icon icon=\"plus\" size=\"lg\"></font-awesome-icon>\n                    Adicionar otras\n                  </button>\n                </div>\n              </div>\n              <div>&nbsp;</div>\n              <h3 style=\"color:#003e1e; text-align:center;\"> Si tiene clausula de responsabilidad de bienes por favor seleccione el responsable de los bienes </h3>\n              <div>&nbsp;</div>\n              <div class=\"form-group\" >\n                <div class=\"row\">\n                  <div class=\"col\">\n                    <label for=\"interventors\">Personas a cargo:</label>\n                  </div>\n                  <div class=\"col-6\">\n                      <multiselect v-model=\"responsable\" :options=\"personasResponsable\" track-by=\"_id\" label=\"name\" :searchable=\"false\" :close-on-select=\"true\" :show-labels=\"true\" placeholder=\"Escoja un interventor\">\n                    </multiselect>\n                  </div>\n                  <div class=\"col\">\n                    <button class=\"btn btn-primary\" type=\"button\" @click=\"showModalCreatePerson()\" style=\"background:#003e1e;border-color:#003e1e;\">\n                      <font-awesome-icon icon=\"pencil-alt\" size=\"lg\"></font-awesome-icon>\n                      Crear Nuevo\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <div>&nbsp;</div>\n              <div class=\"row justify-content-center\">\n                <div class=\"col-3 text-center\">\n                  <button class=\"btn btn-primary\" type=\"submit\" :disabled=\"correct_date || submitting\" style=\"background:#003e1e;border-color:#003e1e;\">\n                    <font-awesome-icon icon=\"save\" size=\"lg\"></font-awesome-icon>\n                    Guardar y continuar\n                  </button>\n                </div>\n                <div class=\"col-3 text-center\">\n                  <button class=\"btn btn-primary\" type=\"button\" @click=\"cancel()\" style=\"background:#003e1e;border-color:#003e1e;\">\n                    <font-awesome-icon icon=\"times-circle\" size=\"lg\"></font-awesome-icon>\n                    Cancelar\n                  </button>\n                </div>\n              </div>\n            </form>\n            <br>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport Multiselect from 'vue-multiselect'\nimport Vuex from 'vuex'\nimport {axios,verifyPermits,requestModulePermit,postModulePermit} from '../../../helpers/axios';\nimport { required } from 'vuelidate/lib/validators'\nimport CreatePerson from '../../persons/CreatePersonModal.vue'\nimport CreateClause from '../../clauses/CreateClauseModal.vue'\n\nvar API_IP = process.env.VUE_APP_API_IP\nconst { mapActions, mapState } = Vuex\n\nexport default {\n  props: ['stp'],\n  components: {\n    Multiselect,\n    'create-person': CreatePerson,\n    'create-clause': CreateClause\n  },\n  data () {\n    return {\n      types_request:[],\n      permitODS:[],\n      permitODC:[],\n      permitATI:[],\n      permitAll:[0,1,2,3,4],\n\n      personasInterventor:[],\n      personasContratista:[],\n      personasResponsable:[],\n\n\n      interventoresSelect:[],\n      contratistasSelect:[],\n      responsablesSelect:[],\n\n      interventor:\"\",\n      contratista:\"\",\n      responsable:\"\",\n\n      start_request_date:\"\",\n      end_request_date:\"\",\n      total_days:\"\",\n\n      causals:[],\n      clauses:[],\n\n\n      causal: \"\",\n      clausulas: \"\",\n      clausulas_request:[],\n      person_charge:\"\",\n      message:\"\",\n      tipo_solicitud:\"\",\n      trabajadores:[],\n      step: this.stp,\n      correct_date: false,\n      modal_show: false,\n      submitting: false\n    }\n  },\n  validations: {\n    tipo_solicitud:{required}, interventor:{required}, contratista:{required},\n    start_request_date:{required}, end_request_date:{required},\n    total_days:{required}, causal:{required}, responsable: {required}\n  },\n  watch:{\n    interventor:function(val){\n      this.personasInterventor = this.interventoresSelect.filter(p => p!=this.contratista && p!=this.responsable)\n      this.personasContratista = this.contratistasSelect.filter(p => p!=this.interventor && p!=this.responsable)\n      this.personasResponsable = this.responsablesSelect.filter(p => p!=this.interventor && p!=this.contratista)\n    },\n    contratista:function(val){\n      this.personasInterventor = this.interventoresSelect.filter(p => p!=this.contratista && p!=this.responsable)\n      this.personasContratista = this.contratistasSelect.filter(p => p!=this.interventor && p!=this.responsable)\n      this.personasResponsable = this.responsablesSelect.filter(p => p!=this.interventor && p!=this.contratista)\n    },\n    responsable:function(val){\n      this.personasInterventor = this.interventoresSelect.filter(p => p!=this.contratista && p!=this.responsable)\n      this.personasContratista = this.contratistasSelect.filter(p => p!=this.interventor && p!=this.responsable)\n      this.personasResponsable = this.responsablesSelect.filter(p => p!=this.interventor && p!=this.contratista)\n    },\n\n  },\n  methods:{\n\n    async loadDataMultiselects(){\n      this.permitODS=await verifyPermits(9,this.permitAll)\n      this.permitODC=await verifyPermits(10,this.permitAll)\n      this.permitATI=await verifyPermits(11,this.permitAll)\n\n      let causalsData=await requestModulePermit(200,0)\n      let clausesData=await requestModulePermit(6,0)\n      console.log(\"asdadsad\");\n      console.log(this.permitODS[2]);\n      console.log(this.permitODC[2]);\n      console.log(this.permitATI[2]);\n\n      if (!this.permitODS[2] && !this.permitODC[2] && !this.permitATI[2]) {\n        alert(\"no tiene permiso\")\n      }\n      else{\n        if (causalsData !== -1  && causalsData!== 0) {\n          this.causals = causalsData\n        }\n        if (clausesData !== -1 && clausesData !== 0) {\n          this.clauses = clausesData\n        }\n        let types_tmp=await requestModulePermit(205,0)\n        for (var k in types_tmp){\n          if(types_tmp[k].nombre == \"ODS\" && this.permitODS[2]){\n            this.types_request.push(types_tmp[k])\n          }\n          else if(types_tmp[k].nombre == \"ODC\" && this.permitODC[2]){\n            this.types_request.push(types_tmp[k])\n          }\n          else if(types_tmp[k].nombre == \"ATI\" && this.permitATI[2]){\n            this.types_request.push(types_tmp[k])\n          }\n        }\n        let allProfesores = await requestModulePermit(206,0,\"profesor\")\n        let allContratistas = await requestModulePermit(206,0,\"contratista\")\n        let allPlanta = await requestModulePermit(206,0,\"planta\")\n        for (var k in allProfesores){\n          var person = {}\n          person[\"_id\"] = allProfesores[k]._id;\n          person[\"name\"] = allProfesores[k].primer_nombre+\" \"+allProfesores[k].segundo_nombre+\" \"+allProfesores[k].primer_apellido+\" \"+allProfesores[k].segundo_apellido;\n          this.interventoresSelect.push(person);\n          this.responsablesSelect.push(person);\n        }\n        for (var k in allContratistas){\n          var person = {}\n          person[\"_id\"] = allContratistas[k]._id;\n          person[\"name\"] = allContratistas[k].primer_nombre+\" \"+allContratistas[k].segundo_nombre+\" \"+allContratistas[k].primer_apellido+\" \"+allContratistas[k].segundo_apellido;\n          this.interventoresSelect.push(person);\n          this.responsablesSelect.push(person);\n          this.contratistasSelect.push(person);\n        }\n        for (var k in allPlanta){\n          var person = {}\n          person[\"_id\"] = allPlanta[k]._id;\n          person[\"name\"] = allPlanta[k].primer_nombre+\" \"+allPlanta[k].segundo_nombre+\" \"+allPlanta[k].primer_apellido+\" \"+allPlanta[k].segundo_apellido;\n          this.interventoresSelect.push(person);\n          this.responsablesSelect.push(person);\n        }\n        this.personasInterventor = this.interventoresSelect\n        this.personasContratista = this.contratistasSelect\n        this.personasResponsable = this.responsablesSelect\n      }\n    },\n\n    changeEndRequestDate(){\n      var sd=new Date(this.start_request_date);\n      var ed=new Date(this.end_request_date);\n      if (sd > ed) {\n        this.correct_date = true\n        this.total_days=0;\n      } else {\n        this.correct_date = false\n        sd.setDate(sd.getDate()+1)\n        ed.setDate(ed.getDate()+1)\n        var differentDays = Math.ceil(Math.abs( ed.getTime() - sd.getTime()) / (1000 * 3600 * 24));\n        this.total_days=differentDays+1;\n      }\n    },\n    cancel(){\n      this.$v.$reset()\n      this.$swal({\n        title: 'Espere',\n        text: '¿Esta seguro que quiere cancelar la operación?',\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Si',\n        cancelButtonText: 'No',\n      }).then((result) => {\n        if (result.value) {\n          this.$swal({\n            title: 'Cancelado',\n            type: 'success'\n          }).then((result) => {\n            if (result.value) {\n              this.$router.push({ name: 'requests' });\n            }\n          });\n        }\n      });\n    },\n    async saveContinue(){\n      this.$v.$touch()\n      if (this.$v.$invalid) {\n        this.$swal({\n          title: 'Error!',\n          text: 'Debe llenar campos necesarios en el formulario',\n          type: 'error',\n          confirmButtonText: 'Cerrar'\n        });\n      } else {\n        this.submitting = true\n        for(var k in this.clausulas){\n          this.clausulas_request.push(this.clausulas[k]._id)\n        }\n\n        let data = {\n          numero_solicitud: \"\",\n          tipo_solicitud:this.tipo_solicitud._id,\n          fecha_inicio:this.start_request_date,\n          fecha_final: this.end_request_date,\n          valor_solicitud:0,\n          justificacion:\"\",\n          justificacion_adicional:\"\",\n          causal_seleccion:this.causal._id,\n          objetivo_general:\"\",\n          clausulas:this.clausulas_request,\n          especificaciones_tecnicas:[],\n          obligaciones_especificas:[],\n          rubros:[],\n          trabajadores:[{persona:this.contratista._id,tipo:\"Contratista\"},{persona:this.interventor._id,tipo:\"Interventor\"},{persona:this.responsable._id,tipo:\"Responsable\"}]\n        }\n\n        let res;\n\n        if (this.tipo_solicitud.nombre == \"ODS\" && this.permitODS[2]) {\n          res=await postModulePermit(9,2,data)\n        }\n        else if (this.tipo_solicitud.nombre == \"ODC\" && this.permitODC[2]) {\n          res=await postModulePermit(10,2,data)\n        }\n        else if (this.tipo_solicitud.nombre == \"ATI\" && this.permitATI[2]) {\n          res=await postModulePermit(11,2,data)\n        }\n\n        if (res != undefined && res != null){\n          if (res.res) {console.log(res.res.obj.data);\n            this.$swal({\n              title: 'Exito!',\n              text: 'Se creo la solicitud con exito.',\n              type: 'success',\n              confirmButtonText: 'Aceptar'\n            }).then((result) => {\n              if (result.value) {\n                this.$emit('saveObject',res);\n                this.submitting = false;\n                this.step++\n                this.$emit('nextStep', this.step)\n              }\n            });\n          }\n          else if (res.error) {\n            this.$swal({\n               title: 'Error!',\n               text: res.error.error.msg,\n               type: 'error',\n               confirmButtonText: 'Cerrar'\n             });\n             this.submitting = false;\n          }\n        }\n\n      }\n    },\n\n    // saveContinue(){\n    //   this.$v.$touch()\n    //   if (this.$v.$invalid) {\n    //     this.$swal({\n    //       title: 'Error!',\n    //       text: 'Debe llenar campos necesarios en el formulario',\n    //       type: 'error',\n    //       confirmButtonText: 'Cerrar'\n    //     });\n    //   } else {\n    //     this.submitting = true\n    //     for(var k in this.clausulas){\n    //       this.clausulas_request.push(this.clausulas[k]._id)\n    //     }\n    //     axios\n    //     .post(API_IP+\"/request\", {\n    //       numero_solicitud: \"\",\n    //       tipo_solicitud:this.tipo_solicitud._id,\n    //       fecha_inicio:this.start_request_date,\n    //       fecha_final: this.end_request_date,\n    //       valor_solicitud:0,\n    //       justificacion:\"\",\n    //       justificacion_adicional:\"\",\n    //       causal_seleccion:this.causal._id,\n    //       objetivo_general:\"\",\n    //       clausulas:this.clausulas_request,\n    //       especificaciones_tecnicas:[],\n    //       obligaciones_especificas:[],\n    //       rubros:[],\n    //       trabajadores:[{persona:this.contratista._id,tipo:\"Contratista\"},{persona:this.interventor._id,tipo:\"Interventor\"},{persona:this.person_charge._id,tipo:\"Responsable\"}]\n    //     })\n    //     .then(response => {\n    //       console.log(response);\n    //       this.$swal({\n    //         title: 'Exito!',\n    //         text: 'Se creo la solicitud con exito.',\n    //         type: 'success',\n    //         confirmButtonText: 'Aceptar'\n    //       }).then((result) => {\n    //         if (result.value) {\n    //           this.$emit('saveObject',response.data);\n    //           this.submitting = false;\n    //           this.step++\n    //           this.$emit('nextStep', this.step)\n    //         }\n    //       });\n    //     })\n    //     .catch(error => {\n    //       console.log(error);\n    //       this.$swal({\n    //         title: 'Error!',\n    //         text: error.response.data.error.msg,\n    //         type: 'error',\n    //         confirmButtonText: 'Cerrar'\n    //       });\n    //       this.submitting = false;\n    //     });\n    //   }\n    // },\n    // // Modal para la creación de personas\n    showModalCreatePerson () {\n      this.modal_show = false;\n      this.$modal.show('create-person');\n    },\n    closeModalCreatePerson (value) {\n      this.modal_show = value;\n      if(this.modal_show === true){\n        this.$modal.hide('create-person');\n        location.reload();\n      }\n    },\n    showModalCreateClause () {\n      this.modal_show = false;\n      this.$modal.show('create-clause');\n    },\n    closeModalCreateClause (value) {\n      this.modal_show = value;\n      if(this.modal_show === true){\n        this.$modal.hide('create-clause');\n        location.reload();\n      }\n    }\n  },\n  mounted(){\n    this.loadDataMultiselects()\n  }\n}\n</script>\n"],"sourceRoot":"src/components/requests/create"}]}