{"remainingRequest":"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/babel-loader/lib/index.js!/home/stevenbustos/Downloads/SIUA/frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/stevenbustos/Downloads/SIUA/frontend/src/store.js","dependencies":[{"path":"/home/stevenbustos/Downloads/SIUA/frontend/src/store.js","mtime":1548955778000},{"path":"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _typeof from \"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/@babel/runtime/helpers/esm/typeof\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/stevenbustos/Downloads/SIUA/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport { axios, verifyPermits } from './helpers/axios';\nvar API_IP = process.env.VUE_APP_API_IP;\nvar headersDic = {};\nheadersDic[process.env.VUE_APP_KEY_HEADER_NAME] = process.env.VUE_APP_KEY_HEADER_CONTENT;\nheadersDic[process.env.VUE_APP_USER_HEADER_NAME] = \"\";\nheadersDic[process.env.VUE_APP_PASS_HEADER_NAME] = \"\";\nheadersDic[process.env.VUE_APP_MODULE_HEADER_NAME] = \"auth\";\nVue.use(Vuex);\nvar token_name = process.env.VUE_APP_TOKEN_HEADER_NAME;\nexport default new Vuex.Store({\n  state: {\n    menu: {\n      0: '',\n      1: '',\n      2: '',\n      3: '',\n      4: '',\n      5: '',\n      6: '',\n      7: '',\n      8: '',\n      9: '',\n      10: '',\n      11: '',\n      12: '',\n      13: '',\n      14: ''\n    },\n    status: '',\n    token: localStorage.getItem(token_name) || ''\n  },\n  mutations: {\n    auth_request: function auth_request(state) {\n      console.log(\"loading\");\n      state.status = 'loading';\n    },\n    auth_success: function auth_success(state, token) {\n      console.log(\"COMPLETE\");\n      state.status = 'success';\n      state.token = token;\n    },\n    auth_error: function auth_error(state) {\n      console.log(\"FAIL\");\n      state.status = 'error';\n    },\n    logout: function logout(state) {\n      state.status = '';\n      state.token = '';\n    },\n    update_token: function update_token(state, newToken) {\n      state.token = newToken;\n    },\n    update_menu: function update_menu(state, menu) {\n      state.menu = menu;\n    }\n  },\n  actions: {\n    updateToken: function updateToken(_ref, newToken) {\n      var commit = _ref.commit;\n      localStorage.setItem(token_name, newToken);\n      commit('update_token', newToken);\n    },\n    showMenu: function () {\n      var _showMenu = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(_ref2) {\n        var commit, params, result, menuTmp, k;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commit = _ref2.commit;\n                params = [100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114];\n                _context.next = 4;\n                return verifyPermits(100, params);\n\n              case 4:\n                result = _context.sent;\n                console.log(result);\n                menuTmp = {};\n\n                if (_typeof(result) === 'object') {\n                  for (k in result) {\n                    menuTmp[k] = result[k];\n                  }\n\n                  commit('update_menu', menuTmp);\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function showMenu(_x) {\n        return _showMenu.apply(this, arguments);\n      }\n\n      return showMenu;\n    }(),\n    login: function login(_ref3, user) {\n      var commit = _ref3.commit;\n      headersDic[process.env.VUE_APP_USER_HEADER_NAME] = user.user;\n      headersDic[process.env.VUE_APP_PASS_HEADER_NAME] = user.password;\n      return new Promise(function (resolve, reject) {\n        commit('auth_request');\n        axios.get(API_IP, {\n          headers: headersDic\n        }).then(function (response) {\n          if (response.data.data !== false) {\n            var token = response.headers[token_name];\n            localStorage.setItem(token_name, token);\n            commit('auth_success', token);\n            resolve(response);\n          } else {\n            commit('auth_error');\n            localStorage.removeItem(token_name);\n            reject(response);\n          }\n        }).catch(function (err) {\n          commit('auth_error');\n          localStorage.removeItem(token_name);\n          reject(err);\n        });\n      });\n    },\n    logout: function logout(_ref4) {\n      var commit = _ref4.commit;\n      return new Promise(function (resolve) {\n        commit('logout');\n        localStorage.removeItem(token_name);\n        resolve();\n      });\n    }\n  },\n  getters: {\n    isLoggedIn: function isLoggedIn(state) {\n      return !!state.token;\n    },\n    authStatus: function authStatus(state) {\n      return state.status;\n    },\n    menuPermits: function menuPermits(state) {\n      return state.menu;\n    }\n  }\n});",{"version":3,"sources":["/home/stevenbustos/Downloads/SIUA/frontend/src/store.js"],"names":["Vue","Vuex","axios","verifyPermits","API_IP","process","env","VUE_APP_API_IP","headersDic","VUE_APP_KEY_HEADER_NAME","VUE_APP_KEY_HEADER_CONTENT","VUE_APP_USER_HEADER_NAME","VUE_APP_PASS_HEADER_NAME","VUE_APP_MODULE_HEADER_NAME","use","token_name","VUE_APP_TOKEN_HEADER_NAME","Store","state","menu","status","token","localStorage","getItem","mutations","auth_request","console","log","auth_success","auth_error","logout","update_token","newToken","update_menu","actions","updateToken","commit","setItem","showMenu","params","result","menuTmp","k","login","user","password","Promise","resolve","reject","get","headers","then","response","data","removeItem","catch","err","getters","isLoggedIn","authStatus","menuPermits"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport {axios,verifyPermits} from './helpers/axios';\n\nvar API_IP = process.env.VUE_APP_API_IP\nvar headersDic = {};\nheadersDic[process.env.VUE_APP_KEY_HEADER_NAME] = process.env.VUE_APP_KEY_HEADER_CONTENT;\nheadersDic[process.env.VUE_APP_USER_HEADER_NAME] = \"\";\nheadersDic[process.env.VUE_APP_PASS_HEADER_NAME] = \"\";\nheadersDic[process.env.VUE_APP_MODULE_HEADER_NAME] = \"auth\";\n\nVue.use(Vuex)\n\nvar token_name = process.env.VUE_APP_TOKEN_HEADER_NAME\n\n\nexport default new Vuex.Store({\n  state: {\n    menu : {\n      0:'',\n      1:'',\n      2:'',\n      3:'',\n      4:'',\n      5:'',\n      6:'',\n      7:'',\n      8:'',\n      9:'',\n      10:'',\n      11:'',\n      12:'',\n      13:'',\n      14:'',\n    },\n    status: '',\n    token: localStorage.getItem(token_name) || '',\n  },\n  mutations: {\n    auth_request(state){\n      console.log(\"loading\");\n      state.status = 'loading'\n    },\n    auth_success(state, token){\n      console.log(\"COMPLETE\");\n      state.status = 'success'\n      state.token = token\n    },\n    auth_error(state){\n      console.log(\"FAIL\");\n      state.status = 'error'\n    },\n    logout(state){\n      state.status = ''\n      state.token = ''\n    },\n    update_token(state, newToken){\n      state.token = newToken\n    },\n    update_menu(state,menu){\n      state.menu =  menu\n    }\n  },\n  actions: {\n    updateToken({commit},newToken){\n      localStorage.setItem(token_name, newToken)\n      commit('update_token',newToken)\n    },\n    async showMenu({commit}){\n      let params=[100,101,102,103,104,105,106,107,108,109,110,111,112,113,114];\n      let result = await verifyPermits(100,params)\n      console.log(result);\n      let menuTmp={}\n      if(typeof result === 'object'){\n          for(var k in result){\n            menuTmp[k] = result[k]\n          }\n          commit('update_menu', menuTmp)\n        }\n    },\n    login({commit}, user){\n      headersDic[process.env.VUE_APP_USER_HEADER_NAME] = user.user;\n      headersDic[process.env.VUE_APP_PASS_HEADER_NAME] = user.password;\n\n      return new Promise((resolve, reject) => {\n        commit('auth_request')\n        axios\n        .get(API_IP,{headers:headersDic})\n        .then(response=>{\n          if(response.data.data !== false){\n            const token = response.headers[token_name]\n            localStorage.setItem(token_name, token)\n            commit('auth_success', token)\n            resolve(response)\n          }\n          else {\n            commit('auth_error')\n            localStorage.removeItem(token_name)\n            reject(response)\n          }\n        })\n        .catch(err => {\n          commit('auth_error')\n          localStorage.removeItem(token_name)\n          reject(err)\n        })\n      })\n    },\n    logout({commit}){\n      return new Promise((resolve) => {\n        commit('logout')\n        localStorage.removeItem(token_name)\n        resolve()\n      })\n    }\n  },\n  getters : {\n    isLoggedIn: state => !!state.token,\n    authStatus: state => state.status,\n    menuPermits: state => state.menu,\n  }\n})\n"]}]}