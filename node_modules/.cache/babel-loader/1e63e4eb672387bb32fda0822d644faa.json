{"remainingRequest":"/home/developer/Documents/SIUA/frontend/node_modules/babel-loader/lib/index.js!/home/developer/Documents/SIUA/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/developer/Documents/SIUA/frontend/src/components/requests/create/CreateRequestD.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/developer/Documents/SIUA/frontend/src/components/requests/create/CreateRequestD.vue","mtime":1544116200209},{"path":"/home/developer/Documents/SIUA/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1538083629208},{"path":"/home/developer/Documents/SIUA/frontend/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/home/developer/Documents/SIUA/frontend/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { axios } from '../../../helpers/axios';\nimport { required } from 'vuelidate/lib/validators';\nvar API_IP = process.env.VUE_APP_API_IP;\nexport default {\n  props: ['stp', 'object'],\n  data: function data() {\n    return {\n      obligations: [{\n        descripcion: '',\n        numero: ''\n      }],\n      step: this.stp,\n      obj: this.object,\n      submitting: false\n    };\n  },\n  validations: {\n    obligations: {\n      required: required,\n      $each: {\n        descripcion: {\n          required: required\n        },\n        numero: {\n          required: required\n        }\n      }\n    }\n  },\n  methods: {\n    addForm: function addForm() {\n      var newObject = {\n        descripcion: '',\n        numero: ''\n      };\n      this.obligations.push(newObject);\n    },\n    delForm: function delForm(index) {\n      this.obligations.splice(index, 1);\n    },\n    changeObligations: function changeObligations() {\n      this.$emit('changeObliga', this.obligations);\n    },\n    saveContinue: function saveContinue() {\n      var _this = this;\n\n      this.$v.$touch();\n\n      if (this.$v.$invalid) {\n        alert(\"Error en el formulario\");\n      } else {\n        this.submitting = true;\n        axios.put(API_IP + \"/request/\" + this.obj._id, {\n          auditoria: this.obj.auditoria,\n          clausulas: this.obj.clausulas,\n          estado: this.obj.estado,\n          _id: this.obj._id,\n          numero_solicitud: this.obj.numero_solicitud,\n          tipo_solicitud: this.obj.tipo_solicitud,\n          fecha_inicio: this.obj.fecha_inicio,\n          fecha_final: this.obj.fecha_final,\n          valor_solicitud: this.obj.valor_solicitud,\n          justificacion: this.obj.justificacion,\n          justificacion_adicional: this.obj.justificacion_adicional,\n          objetivo_general: this.obj.objetivo_general,\n          especificaciones_tecnicas: this.obj.especificaciones_tecnicas,\n          obligaciones_especificas: this.obligations,\n          rubros: this.obj.rubros,\n          trabajadores: this.obj.trabajadores,\n          ciudad: this.obj.ciudad\n        }).then(function (response) {\n          console.log(response);\n\n          _this.$emit('saveObject', response.data);\n\n          alert(\"Se actualizo la solicitud satisfactoriamente\");\n          _this.submitting = false;\n          _this.step++;\n\n          _this.$emit('nextStep', _this.step);\n        }).catch(function (error) {\n          console.log(error);\n          alert(error.response.data.error.msg);\n          _this.submitting = false;\n        });\n      }\n    },\n    previous: function previous() {\n      this.$router.push({\n        name: 'updaterequest',\n        params: {\n          type: this.obj.tipo_solicitud.nombre.toLowerCase(),\n          id: this.obj._id\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["CreateRequestD.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col-md-8 offset-md-2\" style=\"margin-bottom:80px;\">\n        <div class=\"row\">\n          <div class=\"col\">\n            <button onclick=\"window.history.back();\" class=\"btn btn-primary\" style=\"background:#003e1e;border-color:#003e1e;\">\n              <font-awesome-icon icon=\"arrow-left\" size=\"lg\"></font-awesome-icon>\n            </button>\n          </div>\n        </div>\n        <div>&nbsp;</div>\n        <div class=\"card text-center\" style=\"background-color: rgba(255, 255, 255, 0.4);\">\n          <div class=\"card-body\">\n            <h1 class=\"card-title\">Obligaciones específicas del contratista.</h1>\n            <p class=\"card-text\">NOTA: Deben ser puntuales y estar directamente relacionadas con el objeto general a ejecutar.</p>\n          </div>\n        </div>\n        <div>&nbsp;</div>\n        <form v-on:submit.prevent=\"saveContinue\" novalidate>\n          <div v-for=\"(ob, index) in $v.obligations.$each.$iter\" :key=\"index\" class=\"row\">\n            <div class=\"col\">\n              <div class=\"form-group\" :class=\"{ 'form-group--error': $v.$error }\">\n                <label for=\"description\">Descripción:</label>\n                <textarea v-model=\"ob.descripcion.$model\" class=\"form-control\" aria-label=\"description\"\n                placeholder=\"Descripción\" :rows=\"6\" :max-rows=\"10\" @input=\"changeObligations\"></textarea>\n                <div class=\"alert alert-danger\" role=\"alert\" v-if=\"ob.descripcion.$dirty && !ob.descripcion.required\">Es requerida una fecha de inicio</div>\n              </div>\n            </div>\n            <div class=\"col\">\n              <div class=\"form-group\" :class=\"{ 'form-group--error': $v.$error }\">\n                <label for=\"number\">Número:</label>\n                <input v-model=\"ob.numero.$model\" type=\"number\" class=\"form-control\" id=\"number\" aria-describedby=\"number\" placeholder=\"Número\" @input=\"changeObligations\">\n                <div class=\"alert alert-danger\" role=\"alert\" v-if=\"ob.numero.$dirty && !ob.numero.required\">Es requerida una fecha de inicio</div>\n              </div>\n              <button type=\"button\" v-if=\"obligations.length > 1\" class=\"btn btn-primary\" v-on:click=\"delForm(index)\" style=\"background:#003e1e;border-color:#003e1e;\">\n                Quitar obligación especifica\n              </button>\n            </div>\n          </div>\n          <button type=\"button\" class=\"btn btn-primary\" v-on:click=\"addForm\" style=\"background:#003e1e;border-color:#003e1e;\">\n            Añadir obligación especifica\n          </button>\n          <div>&nbsp;</div>\n          <div class=\"row\">\n            <div class=\"col-md-8 offset-md-2\">\n              <div class=\"card\" style=\"background-color: rgba(0, 0, 255, 0.2;\">\n                <div class=\"card-body\">\n                  <h1 class=\"card-title text-center\">Nota:</h1>\n                  <p class=\"card-text\">\n                    <ul>\n                      <li>\n                        La solicitud debe tener mínimo una obligación especifica.\n                      </li>\n                      <li>\n                        En el reporte se mantendra las primeras 5  obligaciones, las demás se presentaran en una hoja como anexo.\n                      </li>\n                    </ul>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div>&nbsp;</div>\n          <div class=\"row justify-content-center\">\n            <div class=\"col-8 align-self-center\">\n              <div class=\"row justify-content-center\">\n                <div class=\"col-3 text-center\">\n                  <a class=\"btn btn-primary\" style=\"background:#003e1e;border-color:#003e1e;\" href=\"/solicitudes\">\n                    <font-awesome-icon icon=\"times-circle\" size=\"lg\"></font-awesome-icon>\n                    Cancelar\n                  </a>\n                </div>\n                <div class=\"col-3 text-center\">\n                  <button class=\"btn btn-primary\" @click=\"previous()\" style=\"background:#003e1e;border-color:#003e1e;\">\n                    <font-awesome-icon icon=\"arrow-left\" size=\"lg\"></font-awesome-icon>\n                    Anterior\n                  </button>\n                </div>\n                <div class=\"col-3 text-center\">\n                  <button class=\"btn btn-primary\" :disabled=\"submitting\" type=\"submit\" style=\"background:#003e1e;border-color:#003e1e;\">\n                    <font-awesome-icon icon=\"save\" size=\"lg\"></font-awesome-icon>\n                    Guardar y continuar\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {axios} from '../../../helpers/axios';\nimport { required } from 'vuelidate/lib/validators'\nvar API_IP = process.env.VUE_APP_API_IP\n\nexport default {\n  props: ['stp', 'object'],\n  data () {\n    return {\n      obligations: [{\n        descripcion: '',\n        numero: ''\n      }],\n      step: this.stp,\n      obj:this.object,\n      submitting: false\n    }\n  },\n  validations: {\n    obligations: {\n      required,\n      $each: {\n        descripcion: { required },\n        numero: { required }\n      }\n    }\n  },\n  methods: {\n    addForm() {\n      let newObject = {\n        descripcion: '',\n        numero: ''\n      }\n      this.obligations.push(newObject)\n    },\n    delForm(index) {\n      this.obligations.splice(index,1)\n    },\n    changeObligations(){\n      this.$emit('changeObliga', this.obligations);\n    },\n    saveContinue(){\n      this.$v.$touch()\n      if (this.$v.$invalid) {\n        alert(\"Error en el formulario\")\n      } else {\n        this.submitting = true;\n        axios\n        .put(API_IP+\"/request/\"+this.obj._id, {\n          auditoria:this.obj.auditoria,\n          clausulas:this.obj.clausulas,\n          estado:this.obj.estado,\n          _id:this.obj._id,\n          numero_solicitud:this.obj.numero_solicitud,\n          tipo_solicitud:this.obj.tipo_solicitud,\n          fecha_inicio:this.obj.fecha_inicio,\n          fecha_final:this.obj.fecha_final,\n          valor_solicitud:this.obj.valor_solicitud,\n          justificacion:this.obj.justificacion,\n          justificacion_adicional:this.obj.justificacion_adicional,\n          objetivo_general:this.obj.objetivo_general,\n          especificaciones_tecnicas:this.obj.especificaciones_tecnicas,\n          obligaciones_especificas:this.obligations,\n          rubros:this.obj.rubros,\n          trabajadores:this.obj.trabajadores,\n          ciudad:this.obj.ciudad\n        })\n        .then(response => {\n          console.log(response);\n          this.$emit('saveObject',response.data)\n          alert(\"Se actualizo la solicitud satisfactoriamente\");\n          this.submitting = false;\n          this.step++\n          this.$emit('nextStep', this.step);\n        })\n        .catch(error => {\n          console.log(error);\n          alert(error.response.data.error.msg);\n          this.submitting = false;\n        });\n      }\n    },\n    previous(){\n      this.$router.push({ name: 'updaterequest', params: { type: this.obj.tipo_solicitud.nombre.toLowerCase() ,id: this.obj._id } });\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/requests/create"}]}