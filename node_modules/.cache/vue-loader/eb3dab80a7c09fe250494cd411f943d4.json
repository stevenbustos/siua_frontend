{"remainingRequest":"/home/developer/Documents/SIUA/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/developer/Documents/SIUA/frontend/src/components/requests/Requests.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/developer/Documents/SIUA/frontend/src/components/requests/Requests.vue","mtime":1548717253339},{"path":"/home/developer/Documents/SIUA/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/developer/Documents/SIUA/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/developer/Documents/SIUA/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/developer/Documents/SIUA/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {axios,verifyPermits,requestModulePermit} from '../../helpers/axios';\nvar API_IP = process.env.VUE_APP_API_IP\n\nvar headersDic = {};\nheadersDic[process.env.VUE_APP_KEY_HEADER_NAME] = process.env.VUE_APP_KEY_HEADER_CONTENT;\nheadersDic[process.env.VUE_APP_TOKEN_HEADER_NAME] = \"\";\nheadersDic[process.env.VUE_APP_MODULE_HEADER_NAME] = 8;\n\nexport default {\n  data () {\n    return {\n      tiposSolicitud:[],\n      permitAll:[0,1,2,3,4],\n      permitSolicitudes:[],\n      permitODS:[],\n      permitODC:[],\n      permitATI:[],\n      odss: [],\n      odcs: [],\n      atis: []\n    }\n  },\n  mounted () {\n    this.verifyAllPermits()\n  },\n  methods: {\n    async loadRequest(id,type){\n      let tmp;\n      if (type == \"ODS\") {\n        tmp=await requestModulePermit(9,0,{tipo_solicitud:id})\n        for(var k in tmp){\n            var request = {}\n            request[\"id\"] = tmp[k]._id\n            request[\"type\"] = tmp[k].tipo_solicitud.nombre\n            request[\"value\"] = tmp[k].valor_solicitud\n            request[\"state\"] = tmp[k].estado\n            request[\"url\"] = \"/solicitudes/\"+tmp[k].tipo_solicitud.nombre.toLowerCase()+\"/\"+tmp[k]._id;\n            this.odss.push(request);\n          }\n      }\n      else if (type == \"ODC\") {\n        tmp=await requestModulePermit(10,0,{tipo_solicitud:id})\n        for(var k in tmp){\n            var request = {}\n            request[\"id\"] = tmp[k]._id\n            request[\"type\"] = tmp[k].tipo_solicitud.nombre\n            request[\"value\"] = tmp[k].valor_solicitud\n            request[\"state\"] = tmp[k].estado\n            request[\"url\"] = \"/solicitudes/\"+tmp[k].tipo_solicitud.nombre.toLowerCase()+\"/\"+tmp[k]._id;\n            this.odcs.push(request);\n          }\n\n      }\n      else if (type == \"ATI\") {\n        tmp=await requestModulePermit(11,0,{tipo_solicitud:id})\n        for(var k in tmp){\n            var request = {}\n            request[\"id\"] = tmp[k]._id\n            request[\"type\"] = tmp[k].tipo_solicitud.nombre\n            request[\"value\"] = tmp[k].valor_solicitud\n            request[\"state\"] = tmp[k].estado\n            request[\"url\"] = \"/solicitudes/\"+tmp[k].tipo_solicitud.nombre.toLowerCase()+\"/\"+tmp[k]._id;\n            this.atis.push(request);\n          }\n      }\n    },\n    create(){\n      this.$router.push({ name: 'createrequest'});\n    },\n    async verifyAllPermits(){\n      this.permitSolicitudes = await verifyPermits(8,this.permitAll)\n      this.permitODS=await verifyPermits(9,this.permitAll)\n      this.permitODC=await verifyPermits(10,this.permitAll)\n      this.permitATI=await verifyPermits(11,this.permitAll)\n\n\n      if (this.permitSolicitudes.valid == -1) {\n        // alert(\"SESION CADUCO\")\n      }\n      else if(!this.permitSolicitudes[0]) {\n        // alert(\"NO TIENE PERMISO\")\n      }\n      else {\n        this.tiposSolicitud=await requestModulePermit(205,0)\n        for(var k in this.tiposSolicitud){\n          await this.loadRequest(this.tiposSolicitud[k]._id,this.tiposSolicitud[k].nombre)\n        }\n      }\n\n\n    }\n  }\n}\n",{"version":3,"sources":["Requests.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"Requests.vue","sourceRoot":"src/components/requests","sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <div v-if=\"!permitSolicitudes\">\n      <p>No tiene permiso</p>\n    </div>\n    <div v-if=\"permitSolicitudes[0]\" style=\"margin:40px;background-color:rgba(255, 255, 255, 0.7);\">\n      <div class=\"row\">\n        <nav aria-label=\"breadcrumb\">\n          <ol class=\"breadcrumb\">\n            <li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">Solicitudes</li>\n          </ol>\n        </nav>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-8 offset-md-2\" style=\"margin-bottom:80px;\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <button onclick=\"window.history.back();\" class=\"btn btn-primary\" style=\"background:#003e1e;border-color:#003e1e;\">\n                <font-awesome-icon icon=\"arrow-left\" size=\"lg\"></font-awesome-icon>\n              </button>\n            </div>\n            <div class=\"col-auto\">\n              <button v-if=\"permitODS[2] || permitODC[2] || permitATI[2]\" type=\"button\" class=\"btn btn-primary\" style=\"background:#003e1e;border-color:#003e1e;\" @click=\"create()\">\n                <font-awesome-icon icon=\"pencil-alt\" size=\"lg\"></font-awesome-icon>\n                Crear\n              </button>\n            </div>\n          </div>\n          <div>&nbsp;</div>\n\n          <div v-if=\"permitODS[0]\">\n            <div class=\"row\">\n              <div class=\"col-auto mr-auto\">\n                <h2 style=\"color:#003e1e\">\n                  ODS\n                </h2>\n              </div>\n              <!-- TODO Hacer con props-->\n              <!-- <div class=\"col-auto\">\n                <button type=\"button\" class=\"btn btn-primary\" style=\"background:#003e1e;border-color:#003e1e;\" @click=\"create()\">\n                  <font-awesome-icon icon=\"pencil-alt\" size=\"lg\"></font-awesome-icon>\n                  Crear\n                </button>\n              </div> -->\n            </div>\n            <br>\n            <div class=\"row\">\n              <div class=\"col\">\n                <table class=\"table table-striped\" style=\"text-align:center;background-color:#dddddd;\">\n                  <thead style=\"background-color: #003e1e; color:white;\">\n                    <tr>\n                      <th v-if=\"permitODS[1]\" scope=\"col\">Acción</th>\n                      <th scope=\"col\">Tipo de solicitud</th>\n                      <th scope=\"col\">Valor</th>\n                      <th scope=\"col\">Estado</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr class=\"clickable-row\" v-for='(ods, index) in odss' :key='index'>\n                      <td v-if=\"permitODS[1]\"><a v-bind:href=\"ods.url\"><font-awesome-icon icon=\"eye\" size=\"lg\"></font-awesome-icon></a></td>\n                      <td>{{ods.type}}</td>\n                      <td>{{ods.value}}</td>\n                      <td>{{ods.state}}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n\n          <div>&nbsp;</div>\n          <div>&nbsp;</div>\n\n          <div v-if=\"permitODC[0]\">\n            <div class=\"row\">\n              <div class=\"col-auto mr-auto\">\n                <h2 style=\"color:#003e1e\">\n                  ODC\n                </h2>\n              </div>\n              <!-- <div class=\"col-auto\">\n                <button type=\"button\" class=\"btn btn-primary\" style=\"background:#003e1e;border-color:#003e1e;\" @click=\"create()\">\n                  <font-awesome-icon icon=\"pencil-alt\" size=\"lg\"></font-awesome-icon>\n                  Crear\n                </button>\n              </div> -->\n            </div>\n            <br>\n            <div class=\"row\">\n              <div class=\"col\">\n                <table class=\"table table-striped\" style=\"text-align:center;background-color:#dddddd;\">\n                  <thead style=\"background-color: #003e1e; color:white;\">\n                    <tr>\n                      <th v-if=\"permitODC[1]\" scope=\"col\">Acción</th>\n                      <th scope=\"col\">Tipo de solicitud</th>\n                      <th scope=\"col\">Valor</th>\n                      <th scope=\"col\">Estado</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr class=\"clickable-row\" v-for='(odc, index) in odcs' :key='index'>\n                      <td v-if=\"permitODC[1]\"><a v-bind:href=\"odc.url\"><font-awesome-icon icon=\"eye\" size=\"lg\"></font-awesome-icon></a></td>\n                      <td>{{odc.type}}</td>\n                      <td>{{odc.value}}</td>\n                      <td>{{odc.state}}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n\n          <div>&nbsp;</div>\n          <div>&nbsp;</div>\n\n          <div v-if=\"permitATI[0]\">\n            <div class=\"row\">\n              <div class=\"col-auto mr-auto\">\n                <h2 style=\"color:#003e1e\">\n                  ATI\n                </h2>\n              </div>\n              <div class=\"col-auto\">\n                <button type=\"button\" class=\"btn btn-primary\" style=\"background:#003e1e;border-color:#003e1e;\" @click=\"create()\">\n                  <font-awesome-icon icon=\"pencil-alt\" size=\"lg\"></font-awesome-icon>\n                  Crear\n                </button>\n              </div>\n            </div>\n            <br>\n            <div class=\"row\">\n              <div class=\"col\">\n                <table class=\"table table-striped\" style=\"text-align:center;background-color:#dddddd;\">\n                  <thead style=\"background-color: #003e1e; color:white;\">\n                    <tr>\n                      <th scope=\"col\">Acción</th>\n                      <th scope=\"col\">Tipo de solicitud</th>\n                      <th scope=\"col\">Valor</th>\n                      <th scope=\"col\">Estado</th>\n                    </tr>\n                  </thead>\n\n                  <tbody>\n                    <tr class=\"clickable-row\" v-for='(ati, index) in atis' :key='index'>\n                      <td><a v-bind:href=\"ati.url\"><font-awesome-icon icon=\"eye\" size=\"lg\"></font-awesome-icon></a></td>\n                      <td>{{ati.type}}</td>\n                      <td>{{ati.value}}</td>\n                      <td>{{ati.state}}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {axios,verifyPermits,requestModulePermit} from '../../helpers/axios';\nvar API_IP = process.env.VUE_APP_API_IP\n\nvar headersDic = {};\nheadersDic[process.env.VUE_APP_KEY_HEADER_NAME] = process.env.VUE_APP_KEY_HEADER_CONTENT;\nheadersDic[process.env.VUE_APP_TOKEN_HEADER_NAME] = \"\";\nheadersDic[process.env.VUE_APP_MODULE_HEADER_NAME] = 8;\n\nexport default {\n  data () {\n    return {\n      tiposSolicitud:[],\n      permitAll:[0,1,2,3,4],\n      permitSolicitudes:[],\n      permitODS:[],\n      permitODC:[],\n      permitATI:[],\n      odss: [],\n      odcs: [],\n      atis: []\n    }\n  },\n  mounted () {\n    this.verifyAllPermits()\n  },\n  methods: {\n    async loadRequest(id,type){\n      let tmp;\n      if (type == \"ODS\") {\n        tmp=await requestModulePermit(9,0,{tipo_solicitud:id})\n        for(var k in tmp){\n            var request = {}\n            request[\"id\"] = tmp[k]._id\n            request[\"type\"] = tmp[k].tipo_solicitud.nombre\n            request[\"value\"] = tmp[k].valor_solicitud\n            request[\"state\"] = tmp[k].estado\n            request[\"url\"] = \"/solicitudes/\"+tmp[k].tipo_solicitud.nombre.toLowerCase()+\"/\"+tmp[k]._id;\n            this.odss.push(request);\n          }\n      }\n      else if (type == \"ODC\") {\n        tmp=await requestModulePermit(10,0,{tipo_solicitud:id})\n        for(var k in tmp){\n            var request = {}\n            request[\"id\"] = tmp[k]._id\n            request[\"type\"] = tmp[k].tipo_solicitud.nombre\n            request[\"value\"] = tmp[k].valor_solicitud\n            request[\"state\"] = tmp[k].estado\n            request[\"url\"] = \"/solicitudes/\"+tmp[k].tipo_solicitud.nombre.toLowerCase()+\"/\"+tmp[k]._id;\n            this.odcs.push(request);\n          }\n\n      }\n      else if (type == \"ATI\") {\n        tmp=await requestModulePermit(11,0,{tipo_solicitud:id})\n        for(var k in tmp){\n            var request = {}\n            request[\"id\"] = tmp[k]._id\n            request[\"type\"] = tmp[k].tipo_solicitud.nombre\n            request[\"value\"] = tmp[k].valor_solicitud\n            request[\"state\"] = tmp[k].estado\n            request[\"url\"] = \"/solicitudes/\"+tmp[k].tipo_solicitud.nombre.toLowerCase()+\"/\"+tmp[k]._id;\n            this.atis.push(request);\n          }\n      }\n    },\n    create(){\n      this.$router.push({ name: 'createrequest'});\n    },\n    async verifyAllPermits(){\n      this.permitSolicitudes = await verifyPermits(8,this.permitAll)\n      this.permitODS=await verifyPermits(9,this.permitAll)\n      this.permitODC=await verifyPermits(10,this.permitAll)\n      this.permitATI=await verifyPermits(11,this.permitAll)\n\n\n      if (this.permitSolicitudes.valid == -1) {\n        // alert(\"SESION CADUCO\")\n      }\n      else if(!this.permitSolicitudes[0]) {\n        // alert(\"NO TIENE PERMISO\")\n      }\n      else {\n        this.tiposSolicitud=await requestModulePermit(205,0)\n        for(var k in this.tiposSolicitud){\n          await this.loadRequest(this.tiposSolicitud[k]._id,this.tiposSolicitud[k].nombre)\n        }\n      }\n\n\n    }\n  }\n}\n</script>\n"]}]}